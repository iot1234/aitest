{% extends "base.html" %}

{% block title %}เข้าสู่ระบบผู้ดูแล{% endblock %}

{% block content %}
<div class="container py-5" style="max-width: 560px;">
    <div class="card shadow-lg border-0 rounded-4" style="min-height:auto;">
        <div class="card-body p-4 p-md-5">
            <div class="text-center mb-4">
                <div class="rounded-circle bg-primary bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3" style="width:64px;height:64px;">
                    <i class="bi bi-shield-lock-fill text-primary fs-2"></i>
                </div>
                <h2 class="mb-1">เข้าสู่ระบบผู้ดูแล</h2>
                <p class="text-muted mb-0">สำหรับจัดการคีย์ระบบ AI, R2 และโมเดล</p>
            </div>

            {% if error %}
            <div class="alert alert-danger alert-inline">
                <span class="alert-icon"><i class="bi bi-exclamation-triangle-fill"></i></span>
                <span>{{ error }}</span>
            </div>
            {% endif %}

            <form method="post" action="{{ url_for('admin_login') }}{% if request.args.get('next') %}?next={{ request.args.get('next') }}{% endif %}" id="loginForm">
                <input type="hidden" name="next" value="{{ request.args.get('next', '') }}">
                <div class="mb-3">
                    <label class="form-label"><i class="bi bi-person me-1"></i>Username</label>
                    <input type="text" name="username" class="form-control" required autofocus placeholder="ชื่อผู้ใช้">
                </div>
                <div class="mb-4">
                    <label class="form-label"><i class="bi bi-key me-1"></i>Password</label>
                    <input type="password" name="password" class="form-control" required placeholder="รหัสผ่าน">
                </div>
                <button class="btn btn-primary w-100" type="submit" id="btnLogin">
                    <i class="bi bi-box-arrow-in-right me-1"></i>เข้าสู่ระบบ
                </button>
            </form>

            <div class="text-center mt-3">
                <a href="{{ url_for('main_page') }}" class="text-muted small"><i class="bi bi-arrow-left me-1"></i>กลับหน้าหลัก</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block custom_js %}
{{ super() }}
<script>
document.getElementById('loginForm')?.addEventListener('submit', function() {
    const btn = document.getElementById('btnLogin');
    if (btn) {
        btn.disabled = true;
        btn.innerHTML = '<span class="spinner-border spinner-border-sm me-1"></span> กำลังเข้าสู่ระบบ...';
    }
});
</script>
{% endblock %}

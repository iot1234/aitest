{% extends "base.html" %}

{% block title %}หน้าหลัก - ระบบทำนายความสำเร็จของนักศึกษา{% endblock %}

{% block custom_css %}
<style>
    /* Hero Section */
    .hero-section {
        padding: 6rem 0 4rem;
        text-align: center;
        position: relative;
        overflow: hidden;
    }
    
    .hero-title {
        font-size: 3.5rem;
        font-weight: 800;
        color: white;
        text-shadow: 0 2px 20px rgba(0,0,0,0.2);
        margin-bottom: 1.5rem;
        line-height: 1.2;
        letter-spacing: -1px;
    }
    
    .hero-subtitle {
        font-size: 1.25rem;
        color: rgba(255,255,255,0.95);
        max-width: 700px;
        margin: 0 auto 2.5rem;
        font-weight: 300;
        line-height: 1.6;
    }
    
    .hero-buttons {
        display: flex;
        gap: 1.5rem;
        justify-content: center;
        flex-wrap: wrap;
    }
    
    /* Stats Section */
    .stats-section {
        margin-bottom: 5rem;
        margin-top: -3rem;
        position: relative;
        z-index: 10;
    }
    
    .stat-item {
        text-align: center;
        padding: 2rem 1.5rem;
        transition: transform 0.3s;
    }

    .stat-item:hover {
        transform: translateY(-5px);
    }
    
    .stat-icon {
        width: 70px;
        height: 70px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        font-size: 2rem;
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        background: linear-gradient(135deg, var(--primary), var(--primary-light));
        color: white;
    }
    
    .stat-number {
        font-size: 3rem;
        font-weight: 800;
        background: linear-gradient(135deg, var(--primary), var(--primary-light));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        line-height: 1;
        margin-bottom: 0.5rem;
    }
    
    .stat-label {
        color: var(--gray-600);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.875rem;
    }
    
    /* Features Section */
    .features-section {
        padding: 2rem 0;
    }

    .section-title {
        text-align: center;
        margin-bottom: 4rem;
    }
    
    .section-title h2 {
        font-size: 2.5rem;
        font-weight: 800;
        color: white;
        margin-bottom: 1rem;
        text-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .section-title p {
        color: rgba(255,255,255,0.9);
        font-size: 1.25rem;
        font-weight: 300;
    }
    
    .feature-card {
        height: 100%;
        border: none;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: var(--radius-xl);
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    .feature-card:hover {
        transform: translateY(-15px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    
    .feature-card .card-body {
        padding: 2.5rem;
        text-align: center;
    }
    
    .feature-card .feature-icon {
        width: 90px;
        height: 90px;
        margin: 0 auto 2rem;
        font-size: 3rem;
        border-radius: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        transition: transform 0.5s;
    }

    .feature-card:hover .feature-icon {
        transform: scale(1.1) rotate(5deg);
    }
    
    .feature-card h5 {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--gray-800);
        margin-bottom: 1rem;
    }
    
    .feature-card p {
        color: var(--gray-600);
        margin-bottom: 2rem;
        line-height: 1.6;
        min-height: 48px;
    }
    
    /* Process Section */
    .process-section {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: var(--radius-2xl);
        padding: 4rem;
        margin-top: 5rem;
        box-shadow: 0 20px 50px rgba(0,0,0,0.05);
    }
    
    .process-step {
        text-align: center;
        padding: 2rem 1rem;
        position: relative;
    }
    
    .process-step::after {
        content: '';
        position: absolute;
        top: 60px;
        right: -50%;
        width: 100%;
        height: 3px;
        background: linear-gradient(90deg, var(--gray-200) 50%, transparent 50%);
        background-size: 20px 100%;
        z-index: 0;
    }
    
    .process-step:last-child::after {
        display: none;
    }
    
    .step-number {
        width: 80px;
        height: 80px;
        background: white;
        color: var(--primary);
        border: 4px solid var(--primary-bg);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        font-weight: 800;
        margin: 0 auto 1.5rem;
        position: relative;
        z-index: 1;
        box-shadow: 0 10px 20px rgba(79, 70, 229, 0.15);
        transition: all 0.3s;
    }

    .process-step:hover .step-number {
        background: var(--primary);
        color: white;
        transform: scale(1.1);
    }
    
    .step-title {
        font-weight: 700;
        font-size: 1.25rem;
        color: var(--gray-800);
        margin-bottom: 0.75rem;
    }
    
    .step-desc {
        color: var(--gray-600);
        font-size: 1rem;
    }
    
    /* CTA Section */
    .cta-section {
        background: linear-gradient(135deg, #4f46e5, #ec4899);
        border-radius: var(--radius-2xl);
        padding: 5rem 3rem;
        text-align: center;
        color: white;
        margin-top: 5rem;
        position: relative;
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(236, 72, 153, 0.3);
    }
    
    .cta-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
    
    .cta-content {
        position: relative;
        z-index: 2;
    }

    .cta-section h3 {
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 1.5rem;
    }
    
    .cta-section p {
        font-size: 1.25rem;
        opacity: 0.9;
        margin-bottom: 2.5rem;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
    }
    
    @media (max-width: 768px) {
        .hero-title { font-size: 2.5rem; }
        .process-step::after { display: none; }
        .stat-number { font-size: 2.5rem; }
        .process-section { padding: 2rem; }
    }
</style>
{% endblock %}

{% block content %}
{% set is_logged_in = session.get('user_id') %}
<!-- Hero Section -->
<section class="hero-section">
    <div data-aos="zoom-in">
        <h1 class="hero-title">
            <i class="bi bi-mortarboard-fill me-2 animate__animated animate__bounceIn"></i><br class="d-md-none">
            ระบบทำนายความสำเร็จของนักศึกษา
        </h1>
        <p class="hero-subtitle">
            ยกระดับการศึกษาด้วยปัญญาประดิษฐ์และการเรียนรู้ของเครื่อง เพื่อวิเคราะห์และทำนายผลการเรียน
            ช่วยให้สถาบันสามารถวางแผนและพัฒนาผู้เรียนได้อย่างตรงจุด
        </p>
        <div class="hero-buttons">
            <a href="{{ url_for('curriculum_prediction_form') }}" class="btn btn-light btn-lg px-5 py-3 rounded-pill shadow-lg">
                <i class="bi bi-person-check-fill text-primary"></i> ทดสอบการทำนาย
            </a>
            {% if is_logged_in %}
            <a href="{{ url_for('predict_batch_page') }}" class="btn btn-outline-light btn-lg px-5 py-3 rounded-pill">
                <i class="bi bi-cpu"></i> ฝึกโมเดล AI
            </a>
            {% else %}
            <a href="{{ url_for('admin_login') }}" class="btn btn-outline-light btn-lg px-5 py-3 rounded-pill">
                <i class="bi bi-box-arrow-in-right"></i> เข้าสู่ระบบเพื่อเมนูขั้นสูง
            </a>
            {% endif %}
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section container">
    <div class="card glass-card border-0 p-4" data-aos="fade-up" data-aos-delay="200">
        <div class="row g-4">
            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-icon bg-primary text-white">
                        <i class="bi bi-graph-up-arrow"></i>
                    </div>
                    <div class="stat-number" data-count="95">0</div>
                    <div class="stat-label">ความแม่นยำ (%)</div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-icon bg-success text-white">
                        <i class="bi bi-people-fill"></i>
                    </div>
                    <div class="stat-number" data-count="10000">0</div>
                    <div class="stat-label">ข้อมูลนักศึกษา</div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-icon bg-info text-white">
                        <i class="bi bi-journal-bookmark-fill"></i>
                    </div>
                    <div class="stat-number" data-count="50">0</div>
                    <div class="stat-label">รายวิชาที่วิเคราะห์</div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-icon bg-warning text-white">
                        <i class="bi bi-calendar3"></i>
                    </div>
                    <div class="stat-number" data-count="4">0</div>
                    <div class="stat-label">ปีการศึกษา</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features-section">
    <div class="section-title" data-aos="fade-up">
        <h2><i class="bi bi-grid-3x3-gap-fill me-2"></i>ฟีเจอร์อัจฉริยะ</h2>
        <p>
            {% if is_logged_in %}
            เครื่องมือครบครันสำหรับการวิเคราะห์และทำนายผลการเรียนด้วย AI
            {% else %}
            ผู้ใช้ทั่วไปสามารถใช้งานหน้าทำนายได้ทันที และเข้าสู่ระบบเพื่อใช้งานเมนูขั้นสูง
            {% endif %}
        </p>
    </div>
    
    <div class="row g-4">
        {% if is_logged_in %}
        <!-- Admin: Train Model -->
        <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
            <div class="card feature-card">
                <div class="card-body">
                    <div class="feature-icon bg-primary text-white">
                        <i class="bi bi-cpu-fill"></i>
                    </div>
                    <h5>ฝึกโมเดล AI</h5>
                    <p>อัปโหลดข้อมูลเพื่อสร้างโมเดลการทำนายที่แม่นยำด้วย Machine Learning ขั้นสูง</p>
                    <a href="{{ url_for('predict_batch_page') }}" class="btn btn-primary w-100 rounded-pill">
                        <i class="bi bi-play-circle me-1"></i> เริ่มฝึกโมเดล
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Public: Individual Prediction -->
        <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
            <div class="card feature-card">
                <div class="card-body">
                    <div class="feature-icon bg-success text-white">
                        <i class="bi bi-person-check-fill"></i>
                    </div>
                    <h5>ทำนายรายบุคคล</h5>
                    <p>กรอกข้อมูลผลการเรียนเพื่อทำนายโอกาสสำเร็จการศึกษาและรับคำแนะนำ</p>
                    <a href="{{ url_for('curriculum_prediction_form') }}" class="btn btn-success w-100 rounded-pill">
                        <i class="bi bi-search me-1"></i> เริ่มทำนาย
                    </a>
                </div>
            </div>
        </div>

        <!-- Public: Curriculum Analysis -->
        <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="400">
            <div class="card feature-card">
                <div class="card-body">
                    <div class="feature-icon bg-secondary text-white">
                        <i class="bi bi-diagram-3-fill"></i>
                    </div>
                    <h5>วิเคราะห์หลักสูตร</h5>
                    <p>ตรวจสอบความสัมพันธ์ของวิชาและเงื่อนไขรายวิชา (Prerequisite)</p>
                    <a href="{{ url_for('curriculum_page') }}" class="btn btn-secondary w-100 rounded-pill">
                        <i class="bi bi-bezier2 me-1"></i> วิเคราะห์โครงสร้าง
                    </a>
                </div>
            </div>
        </div>

        {% if is_logged_in %}
        <!-- Admin: Model Management -->
        <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="500">
            <div class="card feature-card">
                <div class="card-body">
                    <div class="feature-icon bg-dark text-white">
                        <i class="bi bi-gear-fill"></i>
                    </div>
                    <h5>จัดการโมเดล</h5>
                    <p>ตรวจสอบประสิทธิภาพ เปรียบเทียบ และจัดการเวอร์ชันของโมเดล AI</p>
                    <a href="{{ url_for('models_page') }}" class="btn btn-dark w-100 rounded-pill">
                        <i class="bi bi-sliders me-1"></i> ตั้งค่าโมเดล
                    </a>
                </div>
            </div>
        </div>
        {% else %}
        <!-- Anonymous: Login prompt -->
        <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="500">
            <div class="card feature-card">
                <div class="card-body">
                    <div class="feature-icon bg-primary text-white">
                        <i class="bi bi-box-arrow-in-right"></i>
                    </div>
                    <h5>เข้าสู่ระบบแอดมิน</h5>
                    <p>เข้าสู่ระบบเพื่อใช้งานเมนูฝึกโมเดล จัดการโมเดล และตั้งค่าระบบ</p>
                    <a href="{{ url_for('admin_login') }}" class="btn btn-primary w-100 rounded-pill">
                        <i class="bi bi-box-arrow-in-right me-1"></i> เข้าสู่ระบบ
                    </a>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<!-- Process Section -->
<section class="process-section" data-aos="fade-up">
    <div class="text-center mb-5">
        <h3 class="fw-bold text-primary display-6">
            <i class="bi bi-signpost-split-fill me-2"></i>ขั้นตอนการใช้งาน
        </h3>
        <p class="text-muted fs-5">เริ่มต้นใช้งานระบบง่ายๆ เพียง 4 ขั้นตอน</p>
    </div>
    
    <div class="row">
        <div class="col-md-3 col-6" data-aos="fade-right" data-aos-delay="100">
            <div class="process-step">
                <div class="step-number">1</div>
                <h6 class="step-title">อัปโหลดข้อมูล</h6>
                <p class="step-desc">นำเข้าข้อมูลผลการเรียนเพื่อเตรียมพร้อม</p>
            </div>
        </div>
        <div class="col-md-3 col-6" data-aos="fade-right" data-aos-delay="200">
            <div class="process-step">
                <div class="step-number">2</div>
                <h6 class="step-title">ฝึกโมเดล AI</h6>
                <p class="step-desc">ระบบประมวลผลและเรียนรู้จากข้อมูล</p>
            </div>
        </div>
        <div class="col-md-3 col-6" data-aos="fade-right" data-aos-delay="300">
            <div class="process-step">
                <div class="step-number">3</div>
                <h6 class="step-title">ทำนายผล</h6>
                <p class="step-desc">ระบุข้อมูลนักศึกษาที่ต้องการทำนาย</p>
            </div>
        </div>
        <div class="col-md-3 col-6" data-aos="fade-right" data-aos-delay="400">
            <div class="process-step">
                <div class="step-number">4</div>
                <h6 class="step-title">รับคำแนะนำ</h6>
                <p class="step-desc">ดูผลลัพธ์พร้อมแนวทางการพัฒนา</p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section" data-aos="zoom-in-up">
    <div class="cta-content">
        <h3><i class="bi bi-rocket-takeoff-fill me-2 animate__animated animate__shakeY animate__infinite" style="animation-duration: 3s;"></i>พร้อมเริ่มต้นใช้งานหรือยัง?</h3>
        <p>ยกระดับคุณภาพการศึกษาด้วยเทคโนโลยี AI ที่ทันสมัยและแม่นยำ เริ่มต้นใช้งานได้ทันที ฟรี!</p>
        <div class="d-flex justify-content-center gap-3 flex-wrap">
            <a href="{{ url_for('curriculum_prediction_form') }}" class="btn btn-light btn-lg px-5 py-3 rounded-pill shadow-lg text-primary fw-bold">
                <i class="bi bi-play-fill"></i> ทดลองใช้งาน
            </a>
            {% if is_logged_in %}
            <a href="{{ url_for('status_page') }}" class="btn btn-outline-light btn-lg px-5 py-3 rounded-pill">
                <i class="bi bi-activity"></i> ดูสถานะระบบ
            </a>
            {% else %}
            <a href="{{ url_for('admin_login') }}" class="btn btn-outline-light btn-lg px-5 py-3 rounded-pill">
                <i class="bi bi-box-arrow-in-right"></i> เข้าสู่ระบบ
            </a>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}

{% block custom_js %}
<script>
// Animate stats when visible
function animateStats() {
    const statNumbers = document.querySelectorAll('.stat-number[data-count]');
    statNumbers.forEach(stat => {
        const target = parseInt(stat.getAttribute('data-count'));
        let current = 0;
        const duration = 2000; // ms
        const increment = target / (duration / 20); // 60fps approx
        
        const updateStat = () => {
            current += increment;
            if (current < target) {
                stat.textContent = Math.ceil(current).toLocaleString();
                requestAnimationFrame(updateStat);
            } else {
                stat.textContent = target.toLocaleString();
            }
        };
        updateStat();
    });
}

// Intersection Observer for stats animation
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            animateStats();
            observer.unobserve(entry.target);
        }
    });
}, { threshold: 0.5 });

document.addEventListener('DOMContentLoaded', function() {
    const statsSection = document.querySelector('.stats-section');
    if (statsSection) {
        observer.observe(statsSection);
    }
});
</script>
{% endblock %}
